{% extends "base.html" %}

{% block title %}Trading Dashboard - A+ Trading App{% endblock %}

{% block head %}
<style>
  .card {
    margin-bottom: 1.5rem;
  }
  .signal-card {
    border-left: 4px solid var(--bs-primary);
  }
  .bullish {
    border-left-color: var(--bs-success);
  }
  .bearish {
    border-left-color: var(--bs-danger);
  }
  .badge-success {
    background-color: var(--bs-success);
  }
  .badge-danger {
    background-color: var(--bs-danger);
  }
  .badge-warning {
    background-color: var(--bs-warning);
    color: var(--bs-dark);
  }
  .badge-info {
    background-color: var(--bs-info);
  }
  .price-trigger {
    font-weight: bold;
  }
  .chart-container {
    height: 300px;
    width: 100%;
  }
  .position-active {
    border-left: 4px solid var(--bs-success);
  }
  .position-closed {
    border-left: 4px solid var(--bs-secondary);
  }
  .table th {
    position: sticky;
    top: 0;
    background-color: var(--bs-dark);
    z-index: 1;
  }
  .notification-unread {
    background-color: rgba(var(--bs-primary-rgb), 0.1);
  }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center">
        <h1>Trading Dashboard</h1>
        <div>
          <button class="btn btn-outline-secondary me-2">
            <i class="bi bi-gear"></i> Settings
          </button>
          <button class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> New Trade
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Market Overview -->
    <div class="col-lg-8">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Market Overview</h5>
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-sm btn-outline-secondary active">Day</button>
            <button type="button" class="btn btn-sm btn-outline-secondary">Week</button>
            <button type="button" class="btn btn-sm btn-outline-secondary">Month</button>
          </div>
        </div>
        <div class="card-body">
          <div class="row mb-4">
            <div class="col-md-3 col-sm-6 mb-3 mb-md-0">
              <div class="card bg-dark">
                <div class="card-body p-3">
                  <h6 class="card-title text-muted mb-1">SPY</h6>
                  <h4 class="mb-1">$588.42</h4>
                  <p class="mb-0 text-success"><i class="bi bi-arrow-up"></i> +0.32%</p>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3 mb-md-0">
              <div class="card bg-dark">
                <div class="card-body p-3">
                  <h6 class="card-title text-muted mb-1">QQQ</h6>
                  <h4 class="mb-1">$442.55</h4>
                  <p class="mb-0 text-success"><i class="bi bi-arrow-up"></i> +0.58%</p>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3 mb-md-0">
              <div class="card bg-dark">
                <div class="card-body p-3">
                  <h6 class="card-title text-muted mb-1">IWM</h6>
                  <h4 class="mb-1">$235.17</h4>
                  <p class="mb-0 text-danger"><i class="bi bi-arrow-down"></i> -0.24%</p>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="card bg-dark">
                <div class="card-body p-3">
                  <h6 class="card-title text-muted mb-1">VIX</h6>
                  <h4 class="mb-1">14.65</h4>
                  <p class="mb-0 text-success"><i class="bi bi-arrow-down"></i> -2.15%</p>
                </div>
              </div>
            </div>
          </div>
          <!-- Chart placeholder -->
          <div class="chart-container bg-dark d-flex align-items-center justify-content-center">
            <p class="text-muted">Market chart will be displayed here</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Active Signals -->
    <div class="col-lg-4">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Active Signals</h5>
          <button class="btn btn-sm btn-outline-secondary">View All</button>
        </div>
        <div class="card-body p-0">
          <div class="list-group list-group-flush">
            <div class="list-group-item signal-card bullish">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-1">SPY</h6>
                <span class="badge badge-success rounded-pill">Breakout</span>
              </div>
              <p class="mb-1">
                <span class="price-trigger">Above $588.80</span> | <small class="text-muted">07:45 EST</small>
              </p>
              <div class="d-flex justify-content-between align-items-center">
                <small>Target: $592.50</small>
                <button class="btn btn-sm btn-outline-primary">Trade</button>
              </div>
            </div>
            
            <div class="list-group-item signal-card bearish">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-1">NVDA</h6>
                <span class="badge badge-danger rounded-pill">Breakdown</span>
              </div>
              <p class="mb-1">
                <span class="price-trigger">Below $122.15</span> | <small class="text-muted">09:15 EST</small>
              </p>
              <div class="d-flex justify-content-between align-items-center">
                <small>Target: $118.80</small>
                <button class="btn btn-sm btn-outline-primary">Trade</button>
              </div>
            </div>
            
            <div class="list-group-item signal-card bullish">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-1">AAPL</h6>
                <span class="badge badge-success rounded-pill">Bounce</span>
              </div>
              <p class="mb-1">
                <span class="price-trigger">Above $212.40</span> | <small class="text-muted">10:30 EST</small>
              </p>
              <div class="d-flex justify-content-between align-items-center">
                <small>Target: $215.75</small>
                <button class="btn btn-sm btn-outline-primary">Trade</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <!-- Active Positions -->
    <div class="col-lg-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Active Positions</h5>
          <div>
            <button class="btn btn-sm btn-outline-secondary">History</button>
          </div>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive" style="max-height: 300px;">
            <table class="table table-dark table-hover mb-0">
              <thead>
                <tr>
                  <th>Symbol</th>
                  <th>Type</th>
                  <th>Qty</th>
                  <th>Entry</th>
                  <th>Current</th>
                  <th>P/L</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>SPY 05/17 590C</td>
                  <td><span class="badge badge-success">Call</span></td>
                  <td>5</td>
                  <td>$2.45</td>
                  <td>$3.25</td>
                  <td class="text-success">+32.65%</td>
                  <td>
                    <div class="btn-group btn-group-sm">
                      <button class="btn btn-outline-success">Close</button>
                      <button class="btn btn-outline-secondary">Details</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>NVDA 05/24 120P</td>
                  <td><span class="badge badge-danger">Put</span></td>
                  <td>3</td>
                  <td>$1.85</td>
                  <td>$2.15</td>
                  <td class="text-success">+16.22%</td>
                  <td>
                    <div class="btn-group btn-group-sm">
                      <button class="btn btn-outline-success">Close</button>
                      <button class="btn btn-outline-secondary">Details</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>AAPL 05/17 215C</td>
                  <td><span class="badge badge-success">Call</span></td>
                  <td>10</td>
                  <td>$0.95</td>
                  <td>$0.75</td>
                  <td class="text-danger">-21.05%</td>
                  <td>
                    <div class="btn-group btn-group-sm">
                      <button class="btn btn-outline-danger">Close</button>
                      <button class="btn btn-outline-secondary">Details</button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Notifications -->
    <div class="col-lg-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Notifications</h5>
          <button class="btn btn-sm btn-outline-secondary">Mark All Read</button>
        </div>
        <div class="card-body p-0">
          <div class="list-group list-group-flush" style="max-height: 300px; overflow-y: auto;">
            <div class="list-group-item notification-unread">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-1">Signal Triggered: SPY Breakout</h6>
                <small class="text-muted">07:45 EST</small>
              </div>
              <p class="mb-1">SPY broke above $588.80, triggering a bullish breakout signal.</p>
              <div class="d-flex justify-content-end">
                <button class="btn btn-sm btn-outline-primary me-2">View</button>
                <button class="btn btn-sm btn-outline-secondary">Dismiss</button>
              </div>
            </div>
            
            <div class="list-group-item notification-unread">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-1">Trade Executed: SPY 05/17 590C</h6>
                <small class="text-muted">08:15 EST</small>
              </div>
              <p class="mb-1">Bought 5 contracts of SPY 05/17 590C at $2.45.</p>
              <div class="d-flex justify-content-end">
                <button class="btn btn-sm btn-outline-primary me-2">View</button>
                <button class="btn btn-sm btn-outline-secondary">Dismiss</button>
              </div>
            </div>
            
            <div class="list-group-item">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-1">Signal Triggered: NVDA Breakdown</h6>
                <small class="text-muted">09:15 EST</small>
              </div>
              <p class="mb-1">NVDA broke below $122.15, triggering a bearish breakdown signal.</p>
              <div class="d-flex justify-content-end">
                <button class="btn btn-sm btn-outline-primary me-2">View</button>
                <button class="btn btn-sm btn-outline-secondary">Dismiss</button>
              </div>
            </div>
            
            <div class="list-group-item">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-1">Trade Executed: NVDA 05/24 120P</h6>
                <small class="text-muted">09:30 EST</small>
              </div>
              <p class="mb-1">Bought 3 contracts of NVDA 05/24 120P at $1.85.</p>
              <div class="d-flex justify-content-end">
                <button class="btn btn-sm btn-outline-primary me-2">View</button>
                <button class="btn btn-sm btn-outline-secondary">Dismiss</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize any JavaScript functionality here
    console.log('Trading dashboard loaded');
  });
</script>
{% endblock %}